<%@include file="prevent.jsp" %>
<%@page import="java.util.ArrayList"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="com.dbcon.Conn"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.Connection"%>
<%@page import="com.bean.AttendanceStatus"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
	pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://displaytag.sf.net" prefix="display"%>


<html>
<head>
 <meta name="viewport" content="=600, initial-scale=1">
 <link rel="icon" type="image/png" href="login/images/icons/logo.ico"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/branchSubDetail.css">
    <link href="https://fonts.googleapis.com/css?family=Fahkwang" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/gredient.css">
    
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Attendance Subject Status</title>
</head>

<body>
<%
String accYear=(String)session.getAttribute("accYear");
String month=(String)session.getAttribute("month");
String branch=(String)session.getAttribute("branch");
String division=(String)session.getAttribute("division");
String batch=(String)session.getAttribute("batch");
String sem=(String)session.getAttribute("sem");
String subject=(String)session.getAttribute("subject"); 

AttendanceStatus as=null;
ArrayList<AttendanceStatus> list=new ArrayList();
Connection con;
ResultSet rs;

con=Conn.getCon();
try{
	PreparedStatement ps=con.prepareStatement("select rollno,studentname,status from classsmonthstatus where accyear=? and month=? and branch=? and division=? and sem=? and subject=?");
	ps.setString(1, accYear);
	ps.setString(2, month);
	ps.setString(3, branch);
	ps.setString(4, division);
	ps.setString(5, sem);
	ps.setString(6, subject);
	rs=ps.executeQuery();
	while(rs.next())
	{
		as=new AttendanceStatus();
		as.setRollNo(rs.getString("rollno"));
		as.setStudentName(rs.getString("studentname"));
		as.setStatus(rs.getString("status"));
		
		list.add(as);
		
	}
	request.setAttribute("attendanceStatus", list);
}catch(Exception e)
{
	e.printStackTrace();
}
%>

<div class="container">
 <div class="row">
      <div class="col-md-8 offset-2">
  <div class="form-resp">
                    <H4 class=text-center>Studentnt Class Attendane Status</H4>
                    
                    <div class="form-group">
	<display:table class="table table-dark table-striped" border="1" name="attendanceStatus" sort="list" pagesize="5" id="table1"
		export="true">
		<display:column property="rollNo" title="Roll NO" group="1" sortable="true"
			headerClass="sortable" />
		<display:column property="studentName" title="Student Name" group="2"
			sortable="true" headerClass="sortable" />
		<display:column property="status" title="Status %" />
		<display:setProperty name="export.excel.filename"
			value="status.xls" />
		<display:setProperty name="export.pdf.filename"
			value="status.pdf" />
		<display:setProperty name="export.csv.filename"
			value="status.csv" />
		<display:setProperty name="export.pdf" value="true" />
	</display:table>
	</div>
	</div>
	</div>
	</div>
	</div>
</body>
</html>
<%@include file="footer.html"%>